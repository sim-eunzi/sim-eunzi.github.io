---
title: 자바스크립트 엔진과 동작원리
date: "2015-05-06T23:46:37.121Z"
---

자바스크립트는 원래 브라우저의 생동감을 넣기위해 만들어진 프로그래밍입니다.

브라우저뿐만 아니라 서버에서도 사용 가능하고,  
이 외에도 `자바스크립트 엔진` 이 있는 모든 디바이스에 동작할 수 있습니다.

엔진의 종류는 다양하고, 대표적인 예로 Chrome과 Node.js 에서 사용하는 `V8` 엔진과  
파이어폭스에서 쓰이는 `SpiderMonkey` 등 이 있습니다.

그러면 스크립트를 작성하고 실제 코드가 동작하는 과정은 어떨까요?

1. 엔진(브라우저라면 내장엔진)이 스크립트를 읽는다. (파싱)
2. 읽은 스크립트를 기계어로 전환한다. (컴파일)
3. 기계어로 전환된 코드를 실행한다.

자바스크립트 엔진은 파싱과 코드 생성 과정에서,  
불필요한 요소를 삭제하는 과정에서 실행시 성능을 최적화합니다.

그러면 엔진에 대해서도 자세히 알아봅시다.  
엔진의 주요 구성요소는 `Memory Heap` 과 `Call Stack` 으로 이루어져 있습니다.

`Memory Heap` 에서는 메모리 할당이 일어나고,  
`Call Stack` 에선 코드 실행에 따라 호출 스택이 하나씩 쌓이게 됩니다.

자바스크립트 엔진에는 우리가 많이 사용하는 `setTimeout, Ajax, DOM 등` 을 포함하고 있지 않습니다.

이렇게 엔진 이외에도 자바스크립트를 관여하는 요소들은 많은데,  
거기에 브라우저에서 제공하는 API 들을 `Web API` 라고 하고,  
그 외 에도 `Event Loop`와 `Callback Queue` 도 존재합니다.

`Event Loop` 는 Call Stack과 Callback Queue의 상태를 체크하여, Call Stack이 빈 상태가 되면
Callback Queue 의 첫번째 콜백을 Call Stack 으로 밀어 넣는걸 말합니다.

자바스크립트는 **싱글 스레드** 기반 언어로 Call Stack(호출 스택)이 하나라, **한 번에 한 작업**만 처리할 수 있습니다.

하나의 Call Stack 에서 함수 실행이 길어지면 브라우저는 아무 동작도 못하게 됩니다.

이런 상태는 UI 나 사용자가 보기에 매끄럽지 않은 문제를 가지고 있어,  
렌더링 동작을 방해하지 않게 하기 위해 **비동기 콜백** 방법을 사용하게 됩니다.
